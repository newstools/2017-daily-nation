MADRID Novak Djokovic staved off a huge upset in his first match since splitting with his long-time coaching team to beat Nicolas Almagro 6-1, 4-6, 7-5 in the second round of the Madrid Masters on Wednesday. After a blistering start, Djokovic had to battle back from 3-0 down in the deciding set to book his place in the last 16 on Thursday against Feliciano Lopez or Gilles Simon. Djokovic is without a coach in the Spanish capital after bringing to an end a 10-year relationship with Marian Vajda in an attempt to reverse his dramatic slump in form over the past year. "I'm still finding my way to that consistency level and quality of tennis that I'm looking for," said Djokovic. "I'm aware that I'm not playing at my best, but I'm definitely believing in myself and the process. "Eventually the game will come together." The early signs were positive for the 12-time Grand Slam champion as despite losing his service in the opening game, he broke straight back to start a six-game streak to romp through the first set. Almagro had taken just one set from four previous meetings with Djokovic, but willed on by a partisan home crowd, he held on to his serve despite more pressure from the Serb in the first game of the second set. The Spaniard had to save two break points to hold for 4-3 and then took his chance to break with Djokovic serving to stay in the set. The world number 75, who dipped down to the challenger tour after losing in the first round of the Australian Open earlier this year, then looked set for a monumental upset as he raced into a 3-0 lead in the decider. However, a mixture of Almagro nerves and Djokovic upping his intensity saw the world number two react immediately to level at 3-3. More Almagro errors followed to give Djokovic another break for 6-5 and he served out for the match. "Four consecutive games lost in this level should not happen because otherwise you're going to lose the match," added Djokovic. "I was very close to losing it, as well. He was up 3-love. "I'm happy with the way I handled the pressure in those moments, just stayed with him, made him play always extra shot. "I did my work in the end of the match." Djokovic could meet Rafael Nadal in the semi-finals. However, the 14-time Grand Slam champion has a difficult route to that potential matchup as he faces Fabio Fognini later on Wednesday and potentially Nick Kyrgios in the third round. Controversial Australian Kyrgios cruised past American Ryan Harrison 6-3, 6-3. Fifth seed Milos Raonic is also into the last 16 as he got the better of a battle between two big servers, winning 6-4, 6-4 against Gilles Muller. Raonic will play Belgium's David Goffin next. Kei Nishikori recovered from a dreadful start to beat Argentine Diego Schwartzman 1-6, 6-0, 6-4. Nishikori faces David Ferrer next, who progressed as Jo-Wilfried Tsonga withdrew with a shoulder injury. In the WTA Madrid Open, Svetlana Kuznetsova remained one of only three of the top 10 seeds left in the draw with a 6-4, 7-5 win over Wang Qiang to reach the quarter-finals. Kuznetsova will face the winner of an intriguing clash between top seed Angelique Kerber and Eugenie Bouchard, who dumped out Maria Sharapova in thrilling fashion on Monday.  